<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<style>
  * { box-sizing: border-box; }
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #ffffff;
  }

  /* Fixed dimensions for the actual certificate content */
  .certificate-content {
    --side-inset: 90px;
    --v-space: 20px;
    width: 1200px;
    height: 846px;
    padding: 48px var(--side-inset);
    position: relative;
    background:
      radial-gradient(circle at 20% 40%, rgba(0,0,0,0.03), transparent 40%),
      radial-gradient(circle at 80% 60%, rgba(0,0,0,0.03), transparent 40%),
      #ffffff;
    transform-origin: top left;
  }

  /* Inner decorative border */
  .certificate-content::before {
    content: "";
    position: absolute;
    inset: 8px;
    border: 4px solid #c9c9cc;
    pointer-events: none;
  }

  /* Rest of the styles remain identical but targeted at .certificate-content */
  .certificate-content::after {
    content: "";
    position: absolute;
    inset: 8px;
    pointer-events: none;
    background:
      linear-gradient(#c9c9cc, #c9c9cc) left top / 12px 1px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) left top / 1px 12px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) right top / 12px 1px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) right top / 1px 12px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) left bottom / 12px 1px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) left bottom / 1px 12px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) right bottom / 12px 1px no-repeat,
      linear-gradient(#c9c9cc, #c9c9cc) right bottom / 1px 12px no-repeat;
  }

  .google {
    font-family: Arial, sans-serif;
    font-size: 128px;
    font-weight: 700;
    letter-spacing: -0.8px;
    line-height: 1;
    margin-bottom: 24px;
  }
  .g1 { color:#4285F4; }
  .g2 { color:#EA4335; }
  .g3 { color:#FBBC05; }
  .g4 { color:#4285F4; }
  .g5 { color:#34A853; }
  .g6 { color:#EA4335; }

  .issued, .completed, .authorized {
    font-family: Arial, sans-serif;
    font-size: 24px;
    font-weight: 400;
    color: #6b6b6b;
  }
  .issued { margin-top: var(--v-space); }
  .name {
    margin-top: var(--v-space);
    font-size: 48px;
    font-weight: 400;
  }
  .completed { margin-top: var(--v-space); }
  .course {
    margin-top: var(--v-space);
    font-size: 32px;
    font-weight: 400;
  }
  .authorized {
    margin-top: var(--v-space);
    max-width: 560px;
  }

  .signature {
    position: absolute;
    bottom: 120px;
    left: 90px;
  }
  .sig-line {
    font-family: "Segoe Script", "Brush Script MT", cursive;
    font-size: 26px;
    font-weight: 700;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    width: 260px;
    white-space: nowrap;
  }
  .sig-name {
    margin-top: 10px;
    font-family: Arial, sans-serif;
    font-size: 18px;
    font-weight: 400;
    color: #555;
  }
  .sig-title {
    margin-top: 6px;
    font-family: Arial, sans-serif;
    font-size: 18px;
    font-weight: 400;
    color: #6b6b6b;
  }

  .ribbon {
    position: absolute;
    top: 8px;
    right: var(--side-inset);
    width: 200px;
    height: 70%;
    background: #e2e7eb;
    border-left: 1px solid #cfd4dc;
    text-align: center;
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 36px), 50% 100%, 0 calc(100% - 36px));
  }
  .ribbon-inner {
    width: 100%;
    height: 100%;
    padding: 48px 24px 48px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .ribbon-title {
    margin: 0;
    font-family: "Georgia", "Times New Roman", serif;
    font-size: 16px;
    font-weight: 700;
    line-height: 2;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #000000;
  }
  .ribbon-title span { display: block; }
  .seal {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: auto;
    margin-bottom: 16px;
  }
  .seal-image { width: 100%; height: 100%; object-fit: contain; }
  .seal-fallback {
    font-family: Arial, sans-serif;
    font-weight: 700;
    font-size: 16px;
    color: #2c2c2c;
    text-transform: lowercase;
    z-index: 2;
  }

  .verify {
    position: absolute;
    bottom: 36px;
    right: 56px;
    font-family: Arial, sans-serif;
    font-size: 11px;
    color: #555;
    text-align: right;
    width: 360px;
    line-height: 1.5;
  }
  .verify a { color: #1a73e8; text-decoration: none; }
  .content { max-width: 760px; margin-top: 28px; }
</style>
<script>
  function scaleToFit() {
    const scaler = document.querySelector('.certificate-content');
    if (!scaler) return;
    
    // Use clientWidth/Height which are consistently reliable in iframes
    const winW = document.documentElement.clientWidth;
    const winH = document.documentElement.clientHeight;
    
    if (winW === 0 || winH === 0) return;

    const scaleW = winW / 1200;
    const scaleH = winH / 846;
    const scale = Math.min(scaleW, scaleH);
    
    scaler.style.transform = `scale(${scale})`;
    
    // Center it
    const offsetW = (winW - (1200 * scale)) / 2;
    const offsetH = (winH - (846 * scale)) / 2;
    scaler.style.marginLeft = `${offsetW}px`;
    scaler.style.marginTop = `${offsetH}px`;
  }
  
  window.addEventListener('load', scaleToFit);
  window.addEventListener('resize', scaleToFit);
  
  // Run it a few times to ensure it catches the correct dimensions
  for (let i = 0; i < 10; i++) {
    setTimeout(scaleToFit, i * 100);
  }
</script>
</head>

<body>
<div class="certificate-content">
  <div class="content">
    <div class="google">
      <span class="g1">G</span><span class="g2">o</span><span class="g3">o</span><span class="g4">g</span><span class="g5">l</span><span class="g6">e</span>
    </div>
    <div class="issued"><%= issuedDate %></div>

    <div class="name"><%= learnerName %></div>
    <div class="completed">has successfully completed</div>

    <div class="course"><%= courseTitle %></div>
    <div class="authorized">
      an online non-credit course authorized by <%= partnerName %> and offered through Coursera
    </div>
  </div>

  <div class="signature">
    <div class="sig-line">Amanda Brophy</div>
    <div class="sig-name">Amanda Brophy</div>
    <div class="sig-title">Global Director of Google Career Certificates</div>
  </div>

  <div class="ribbon">
    <div class="ribbon-inner">
      <div class="ribbon-title">
        <span>Course</span>
        <span>Certificate</span>
      </div>
      <div class="seal">
        <% if (sealMarkup) { %>
          <img src="<%= sealMarkup %>" alt="Coursera seal" class="seal-image" />
        <% } else { %>
          <div class="seal-fallback">coursera</div>
        <% } %>
      </div>
    </div>
  </div>

  <div class="verify">
    Verify at:<br/>
    <a href="<%= verificationUrl %>"><%= verificationUrl %></a><br/>
    Coursera has confirmed the identity of this individual and<br/>
    their participation in the course
  </div>
</div>
</body>
</html>
